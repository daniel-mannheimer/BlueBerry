{% extends getPartial('page-design-login') %}
{% import "Ceres::PageDesign.Macros.LayoutContainer" as LayoutContainer %}
{% set gCapture = config("Ceres.global.google_recaptcha_api_key") %}
{% set backlink = request.get("backlink") %}
{% set pageDesignType = "login" %}

{% block PartialHead %}
    <meta name="robots" content="NOINDEX, NOFOLLOW">
    <title>{{ trans("Ceres::Template.login") }} | {{ trans("Ceres::Template.headerCompanyName") }}</title>
    <link href="{{ plugin_path('BlueBerry') }}/css/blue-berry.css?v={{ 'now'|date('U') }}" rel="stylesheet" type="text/css" media="all" />
{% endblock %}

{% block PartialFooterLatest %}
    <script src="{{ plugin_path('BlueBerry') }}/js/blue-berry.js?v={{ 'now'|date('U') }}"></script>
{% endblock %}

{% block PageBody %}
<script type="x/template" id="vue-login">
    <form :id="'login-form-' + _uid" class="login-container row clearfix">

        <div class="col-sm-12">
            {{ trans("BlueBerry::Text.loginTextDescription") }}
        </div>

        <div class="clearfix space20"><!-- --></div>

        <div class="col-sm-12">
            <div class="input-unit" data-validate="mail">
                {% set uid_mail = uid() %}
                <input type="email" name="email" id="{{ uid_mail }}" v-model="username" data-autofocus>
                <label for="{{ uid_mail }}">{{ trans("Ceres::Template.loginEmail") }}*</label>
            </div>
            <span class="error-msg">{{ trans("Ceres::Template.loginEnterConfirmEmail") }}</span>
        </div>

        <div class="clearfix space10"><!-- --></div>

        <div class="col-sm-12">
            <div class="input-unit" :class="{'no-bottom': modalElement}" data-validate="text">
                {% set uid_pwd = uid() %}
                <input type="password" name="password" id="{{ uid_pwd }}" v-model="password">
                <label for="{{ uid_pwd }}">{{ trans("Ceres::Template.loginPassword") }}*</label>
                <a href="javascript:void(0)" @click="showResetPwdView" class="small">{{ trans("Ceres::Template.loginForgotPassword") }}?</a>
            </div>
            <span class="error-msg">{{ trans("Ceres::Template.loginEmptyPassword") }}</span>
        </div>

        <div class="clearfix space20"><!-- --></div>

        <div class="col-sm-12">

            <div class="col-sm-2 col-xs-6 pull-left">
                <a href="/customer-register"><span class="fa fa-user"></span></a>
            </div>

            <div class="col-sm-2 col-xs-6 pull-left">
                <a href="/contact">
                    <span class="fa fa-envelope"></span>
                </a>
            </div>

            <div class="col-sm-8 col-xs-12 pull-left">
                {{ LayoutContainer.show("Ceres::LoginOverlay.ExtendOverlayButtons") }}
                <button @click.prevent="validateLogin" :disabled="isDisabled" class="btn btn-primary btn-medium" :class="{'btn-right': !modalElement}">
                    <i class="fa fa-user" v-waiting-animation="isDisabled"></i>
                    {{ trans("Ceres::Template.login") }}
                </button>
            </div>

        </div>

        <div class="clearfix"><!-- --></div>
    </form>
</script>

<script type="x/template" id="vue-login-view" >
    <div class="container-fluid login login-pwd-reset bb-login-holder clearfix">
        <login template="#vue-login" backlink="{{ backlink | url_encode }}" has-to-forward="true"></login>
        <div class="clearfix"><!-- --></div>
    </div>
</script>

<login-view template="#vue-login-view"></login-view>
{% endblock %}